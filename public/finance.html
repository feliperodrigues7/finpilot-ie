<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FinPilot IE - Financeiro Pessoal</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <style>
    body { font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif; }
    .tab-button.active { background:#2563eb; color:#fff; }
    .tab-content { display: none; }
    .tab-content.active { display: block; }
    .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4); }
    .modal-content { background-color: #fff; margin: 6% auto; padding: 20px; border: 1px solid #888; width: 90%; max-width: 700px; border-radius: 8px; position: relative; }
    .close-button { color: #666; position:absolute; right:16px; top:12px; font-size: 24px; font-weight: bold; cursor:pointer; }
    .toast { visibility: hidden; min-width: 250px; margin-left: -125px; background-color: #333; color: #fff; text-align: center; border-radius: 6px; padding: 12px 16px; position: fixed; z-index: 1500; left: 50%; bottom: 30px; font-size: 15px; }
    .toast.show { visibility: visible; animation: fadein 0.4s, fadeout 0.4s 2.6s; }
    @keyframes fadein { from {bottom: 10px; opacity: 0;} to {bottom: 30px; opacity: 1;} }
    @keyframes fadeout { from {bottom: 30px; opacity: 1;} to {bottom: 10px; opacity: 0;} }
    label { font-size: 0.9rem; color:#374151 }
    input, select { border:1px solid #d1d5db }
  </style>
</head>
<body class="bg-gray-50">
  <div class="container mx-auto p-4">
    <div class="flex justify-between items-center mb-6">
      <h1 class="text-2xl md:text-3xl font-bold">FinPilot IE</h1>
      <div class="flex items-center space-x-2">
        <input id="owner-filter" type="text" placeholder="Filtrar por pessoa" class="p-2 border rounded" />
        <button id="logout-button" class="bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded">Sair</button>
      </div>
    </div>

    <div class="bg-white p-4 md:p-6 rounded-lg shadow">
      <div class="flex border-b border-gray-200 overflow-x-auto">
        <button class="tab-button py-2 px-3 md:px-4 text-gray-700 hover:text-blue-600 active" data-tab="dashboard">Dashboard</button>
        <button class="tab-button py-2 px-3 md:px-4 text-gray-700 hover:text-blue-600" data-tab="accounts">Contas</button>
        <button class="tab-button py-2 px-3 md:px-4 text-gray-700 hover:text-blue-600" data-tab="transactions">Transações</button>
        <button class="tab-button py-2 px-3 md:px-4 text-gray-700 hover:text-blue-600" data-tab="categories">Categorias</button>
        <button class="tab-button py-2 px-3 md:px-4 text-gray-700 hover:text-blue-600" data-tab="recurring">Recorrentes</button>
        <button class="tab-button py-2 px-3 md:px-4 text-gray-700 hover:text-blue-600" data-tab="reports">Relatórios</button>
        <button class="tab-button py-2 px-3 md:px-4 text-gray-700 hover:text-blue-600" data-tab="settings">Configurações</button>
      </div>

      <div id="dashboard" class="tab-content active p-4">
        <h2 class="text-xl font-semibold mb-4">Dashboard</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div class="bg-blue-50 p-4 rounded">
            <h3 class="font-semibold">Saldo Total</h3>
            <p id="total-balance" class="text-2xl font-extrabold text-blue-700">€0,00</p>
          </div>
          <div class="bg-green-50 p-4 rounded">
            <h3 class="font-semibold">Receitas (mês)</h3>
            <p id="monthly-income" class="text-2xl font-extrabold text-green-700">€0,00</p>
          </div>
          <div class="bg-red-50 p-4 rounded">
            <h3 class="font-semibold">Despesas (mês)</h3>
            <p id="monthly-expenses" class="text-2xl font-extrabold text-red-700">€0,00</p>
          </div>
        </div>
      </div>

      <div id="accounts" class="tab-content p-4">
        <div class="flex items-center justify-between mb-3">
          <h2 class="text-xl font-semibold">Contas</h2>
          <button id="add-account-button" class="bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded">Adicionar Conta</button>
        </div>
        <div class="overflow-x-auto">
          <table class="min-w-full bg-white border">
            <thead><tr class="bg-gray-50">
              <th class="py-2 px-3 border-b">Pessoa</th>
              <th class="py-2 px-3 border-b">Banco</th>
              <th class="py-2 px-3 border-b">Conta</th>
              <th class="py-2 px-3 border-b">Saldo</th>
              <th class="py-2 px-3 border-b">Ações</th>
            </tr></thead>
            <tbody id="accounts-table-body"><tr><td colspan="5" class="text-center py-4 text-gray-500">Nenhuma conta.</td></tr></tbody>
          </table>
        </div>
      </div>

      <div id="transactions" class="tab-content p-4">
        <div class="flex items-center justify-between mb-3">
          <h2 class="text-xl font-semibold">Transações</h2>
          <div class="flex space-x-2">
            <button id="add-transaction-button" class="bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded">Adicionar</button>
            <button id="export-transactions-button" class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded">Exportar CSV</button>
          </div>
        </div>
        <div class="overflow-x-auto">
          <table class="min-w-full bg-white border">
            <thead><tr class="bg-gray-50">
              <th class="py-2 px-3 border-b">Pessoa</th>
              <th class="py-2 px-3 border-b">Tipo</th>
              <th class="py-2 px-3 border-b">Data</th>
              <th class="py-2 px-3 border-b">Descrição</th>
              <th class="py-2 px-3 border-b">Valor</th>
              <th class="py-2 px-3 border-b">Conta</th>
              <th class="py-2 px-3 border-b">Conta Destino</th>
              <th class="py-2 px-3 border-b">Categoria</th>
              <th class="py-2 px-3 border-b">Ações</th>
            </tr></thead>
            <tbody id="transactions-table-body"><tr><td colspan="9" class="text-center py-4 text-gray-500">Nenhuma transação.</td></tr></tbody>
          </table>
        </div>
      </div>

      <div id="categories" class="tab-content p-4">
        <div class="flex items-center justify-between mb-3">
          <h2 class="text-xl font-semibold">Categorias</h2>
          <button id="add-category-button" class="bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded">Adicionar</button>
        </div>
        <div class="overflow-x-auto">
          <table class="min-w-full bg-white border">
            <thead><tr class="bg-gray-50">
              <th class="py-2 px-3 border-b">Pessoa</th>
              <th class="py-2 px-3 border-b">Nome</th>
              <th class="py-2 px-3 border-b">Tipo</th>
              <th class="py-2 px-3 border-b">Ações</th>
            </tr></thead>
            <tbody id="categories-table-body"><tr><td colspan="4" class="text-center py-4 text-gray-500">Nenhuma categoria.</td></tr></tbody>
          </table>
        </div>
      </div>

      <div id="recurring" class="tab-content p-4">
        <div class="flex items-center justify-between mb-3">
          <h2 class="text-xl font-semibold">Recorrentes</h2>
          <button id="add-recurring-button" class="bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded">Adicionar</button>
        </div>
        <p class="text-gray-600 mb-3">Cadastre receitas/despesas repetitivas. Use "Gerar agora" para criar a próxima transação manualmente.</p>
        <div class="overflow-x-auto">
          <table class="min-w-full bg-white border">
            <thead><tr class="bg-gray-50">
              <th class="py-2 px-3 border-b">Pessoa</th>
              <th class="py-2 px-3 border-b">Título</th>
              <th class="py-2 px-3 border-b">Valor</th>
              <th class="py-2 px-3 border-b">Tipo</th>
              <th class="py-2 px-3 border-b">Frequência</th>
              <th class="py-2 px-3 border-b">Próxima</th>
              <th class="py-2 px-3 border-b">Conta</th>
              <th class="py-2 px-3 border-b">Categoria</th>
              <th class="py-2 px-3 border-b">Ações</th>
            </tr></thead>
            <tbody id="recurring-table-body"><tr><td colspan="9" class="text-center py-4 text-gray-500">Nenhuma recorrência.</td></tr></tbody>
          </table>
        </div>
      </div>

      <div id="reports" class="tab-content p-4">
        <h2 class="text-xl font-semibold mb-3">Relatórios</h2>
        <p class="text-gray-500">Em breve: filtros e gráficos.</p>
      </div>

      <div id="settings" class="tab-content p-4">
        <h2 class="text-xl font-semibold mb-3">Configurações</h2>
        <div class="mb-6">
          <h3 class="text-lg font-semibold mb-2">Pessoas</h3>
          <div class="flex mb-2">
            <input type="text" id="new-person-name" placeholder="Digite um nome" class="p-2 border rounded flex-grow mr-2" />
            <button id="add-person-button" class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded">Adicionar</button>
          </div>
          <ul id="people-list" class="list-disc pl-6"></ul>
        </div>
      </div>
    </div>
  </div>

  <div id="account-modal" class="modal"><div class="modal-content"><span class="close-button">&times;</span>
    <h3 id="account-modal-title" class="text-xl font-semibold mb-4">Adicionar Conta</h3>
    <form id="account-form" class="space-y-3">
      <input type="hidden" id="account-id" />
      <div>
        <label for="account-owner-name">Pessoa</label>
        <input id="account-owner-name" type="text" class="border rounded w-full p-2" placeholder="Ex.: Joao" />
      </div>
      <div>
        <label for="account-bank">Nome do Banco</label>
        <input id="account-bank" type="text" class="border rounded w-full p-2" placeholder="Ex.: Santander" />
      </div>
      <div>
        <label for="account-name">Nome da Conta</label>
        <input id="account-name" type="text" class="border rounded w-full p-2" placeholder="Ex.: Conta Corrente" />
      </div>
      <div>
        <label for="account-balance">Saldo Inicial</label>
        <input id="account-balance" type="number" step="0.01" class="border rounded w-full p-2" />
      </div>
      <div class="flex justify-end space-x-2">
        <button type="button" class="cancel-btn bg-gray-200 px-4 py-2 rounded">Cancelar</button>
        <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded">Salvar</button>
      </div>
    </form>
  </div></div>

  <div id="transaction-modal" class="modal"><div class="modal-content"><span class="close-button">&times;</span>
    <h3 id="transaction-modal-title" class="text-xl font-semibold mb-4">Adicionar Transação</h3>
    <form id="transaction-form" class="space-y-3">
      <input type="hidden" id="transaction-id" />
      <div>
        <label for="transaction-owner-name">Pessoa</label>
        <input id="transaction-owner-name" type="text" class="border rounded w-full p-2" placeholder="Ex.: Joao" />
      </div>
      <div>
        <label for="transaction-type">Tipo</label>
        <select id="transaction-type" class="border rounded w-full p-2">
          <option value="income">Receita</option>
          <option value="expense">Despesa</option>
          <option value="transfer">Transferencia</option>
        </select>
      </div>
      <div>
        <label for="transaction-date">Data</label>
        <input id="transaction-date" type="date" class="border rounded w-full p-2" />
      </div>
      <div>
        <label for="transaction-description">Descrição</label>
        <input id="transaction-description" type="text" class="border rounded w-full p-2" />
      </div>
      <div>
        <label for="transaction-amount">Valor</label>
        <input id="transaction-amount" type="number" step="0.01" class="border rounded w-full p-2" />
      </div>
      <div>
        <label for="transaction-account">Conta</label>
        <select id="transaction-account" class="border rounded w-full p-2"></select>
      </div>
      <div>
        <label for="transaction-account-dst">Conta Destino (se transferencia)</label>
        <select id="transaction-account-dst" class="border rounded w-full p-2"></select>
      </div>
      <div>
        <label for="transaction-category">Categoria</label>
        <select id="transaction-category" class="border rounded w-full p-2"></select>
      </div>
      <div class="flex justify-end space-x-2">
        <button type="button" class="cancel-btn bg-gray-200 px-4 py-2 rounded">Cancelar</button>
        <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded">Salvar</button>
      </div>
    </form>
  </div></div>

  <div id="category-modal" class="modal"><div class="modal-content"><span class="close-button">&times;</span>
    <h3 id="category-modal-title" class="text-xl font-semibold mb-4">Adicionar Categoria</h3>
    <form id="category-form" class="space-y-3">
      <input type="hidden" id="category-id" />
      <div>
        <label for="category-owner-name">Pessoa</label>
        <input id="category-owner-name" type="text" class="border rounded w-full p-2" placeholder="Ex.: Joao" />
      </div>
      <div>
        <label for="category-name">Nome</label>
        <input id="category-name" type="text" class="border rounded w-full p-2" />
      </div>
      <div>
        <label for="category-type">Tipo</label>
        <select id="category-type" class="border rounded w-full p-2">
          <option value="expense">Despesa</option>
          <option value="income">Receita</option>
        </select>
      </div>
      <div class="flex justify-end space-x-2">
        <button type="button" class="cancel-btn bg-gray-200 px-4 py-2 rounded">Cancelar</button>
        <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded">Salvar</button>
      </div>
    </form>
  </div></div>

  <div id="recurring-modal" class="modal"><div class="modal-content"><span class="close-button">&times;</span>
    <h3 id="recurring-modal-title" class="text-xl font-semibold mb-4">Adicionar Recorrencia</h3>
    <form id="recurring-form" class="space-y-3">
      <input type="hidden" id="recurring-id" />
      <div>
        <label for="recurring-owner-name">Pessoa</label>
        <input id="recurring-owner-name" type="text" class="border rounded w-full p-2" placeholder="Ex.: Joao" />
      </div>
      <div>
        <label for="recurring-title">Titulo</label>
        <input id="recurring-title" type="text" class="border rounded w-full p-2" />
      </div>
      <div>
        <label for="recurring-type">Tipo</label>
        <select id="recurring-type" class="border rounded w-full p-2">
          <option value="income">Receita</option>
          <option value="expense">Despesa</option>
        </select>
      </div>
      <div>
        <label for="recurring-amount">Valor</label>
        <input id="recurring-amount" type="number" step="0.01" class="border rounded w-full p-2" />
      </div>
      <div>
        <label for="recurring-frequency">Frequencia</label>
        <select id="recurring-frequency" class="border rounded w-full p-2">
          <option value="weekly">Semanal</option>
          <option value="biweekly">Quinzenal</option>
          <option value="monthly">Mensal</option>
        </select>
      </div>
      <div>
        <label for="recurring-next">Proxima Data</label>
        <input id="recurring-next" type="date" class="border rounded w-full p-2" />
      </div>
      <div>
        <label for="recurring-account">Conta</label>
        <select id="recurring-account" class="border rounded w-full p-2"></select>
      </div>
      <div>
        <label for="recurring-category">Categoria</label>
        <select id="recurring-category" class="border rounded w-full p-2"></select>
      </div>
      <div class="flex justify-end space-x-2">
        <button type="button" class="cancel-btn bg-gray-200 px-4 py-2 rounded">Cancelar</button>
        <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded">Salvar</button>
      </div>
    </form>
  </div></div>

  <div id="toast" class="toast"></div>

  <script src="finance.js"></script>
</body>
</html>
