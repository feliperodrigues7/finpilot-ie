<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinPilot IE - Financeiro Pessoal</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
    body { font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif; }
    .tab-button.active { background-color: #2563eb; color: #fff; }
    .tab-content { display: none; }
    .tab-content.active { display: block; }

    /* Modal Styles */
    .modal { 
        display: none; 
        position: fixed; 
        z-index: 1000; 
        left: 0; 
        top: 0; 
        width: 100%; 
        height: 100%; 
        overflow: auto; 
        background-color: rgba(0,0,0,0.5); 
    }
    .modal.show { display: flex; align-items: center; justify-content: center; }
    .modal-content { 
        background-color: #fefefe; 
        padding: 24px; 
        border-radius: 12px; 
        width: 90%; 
        max-width: 520px; 
        position: relative;
        box-shadow: 0 10px 40px rgba(0,0,0,0.3);
    }
    .modal-header { 
        display: flex; 
        align-items: center; 
        justify-content: space-between; 
        margin-bottom: 20px; 
        padding-bottom: 12px;
        border-bottom: 1px solid #e5e7eb;
    }
    .modal-header h3 { margin: 0; font-size: 1.25rem; font-weight: 600; }
    .close-button { 
        color: #9ca3af; 
        font-size: 28px; 
        font-weight: bold; 
        line-height: 1;
        cursor: pointer;
        background: none;
        border: none;
        padding: 0;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 6px;
        transition: all 0.2s;
    }
    .close-button:hover, .close-button:focus { 
        color: #374151; 
        background: #f3f4f6;
    }

    .form-row { margin-bottom: 16px; }
    .form-row label { 
        display: block; 
        font-size: 14px; 
        font-weight: 500; 
        color: #374151; 
        margin-bottom: 6px; 
    }
    .form-row input, .form-row select { 
        width: 100%; 
        padding: 10px 12px; 
        border: 1px solid #d1d5db; 
        border-radius: 8px; 
        font-size: 14px;
        transition: border-color 0.2s;
    }
    .form-row input:focus, .form-row select:focus { 
        outline: none; 
        border-color: #2563eb; 
        box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }

    .modal-actions { 
        display: flex; 
        gap: 10px; 
        justify-content: flex-end; 
        margin-top: 24px; 
        padding-top: 16px;
        border-top: 1px solid #e5e7eb;
    }
    .btn { 
        padding: 10px 20px; 
        border-radius: 8px; 
        border: none; 
        cursor: pointer; 
        font-weight: 500;
        font-size: 14px;
        transition: all 0.2s;
    }
    .btn-primary { background: #2563eb; color: white; }
    .btn-primary:hover { background: #1d4ed8; transform: translateY(-1px); box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3); }
    .btn-secondary { background: #f3f4f6; color: #374151; }
    .btn-secondary:hover { background: #e5e7eb; }

    /* Floating Action Button */
    .fab-add {
        background: #2563eb;
        color: #fff;
        border: none;
        border-radius: 50%;
        width: 44px;
        height: 44px;
        font-size: 24px;
        cursor: pointer;
        box-shadow: 0 4px 12px rgba(37, 99, 235, 0.4);
        transition: all 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .fab-add:hover { 
        background: #1d4ed8; 
        transform: translateY(-2px); 
        box-shadow: 0 6px 16px rgba(37, 99, 235, 0.5); 
    }

    .tab-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }

    /* Account List Styles */
    .account-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 16px;
        background: #f9fafb;
        border: 1px solid #e5e7eb;
        border-radius: 8px;
        margin-bottom: 12px;
        transition: all 0.2s;
    }
    .account-item:hover {
        background: #f3f4f6;
        border-color: #d1d5db;
    }
    .account-item-info h4 {
        font-size: 16px;
        font-weight: 600;
        color: #111827;
        margin: 0 0 4px 0;
    }
    .account-item-info p {
        font-size: 14px;
        color: #6b7280;
        margin: 0;
    }
    .account-item-actions {
        display: flex;
        gap: 8px;
    }
    .btn-sm {
        padding: 6px 12px;
        font-size: 13px;
    }

    .toast {
        visibility: hidden;
        min-width: 250px;
        margin-left: -125px;
        background-color: #333;
        color: #fff;
        text-align: center;
        border-radius: 8px;
        padding: 16px;
        position: fixed;
        z-index: 2000;
        left: 50%;
        bottom: 30px;
        font-size: 15px;
    }
    .toast.show {
        visibility: visible;
        -webkit-animation: fadein 0.5s, fadeout 0.5s 2.5s;
        animation: fadein 0.5s, fadeout 0.5s 2.5s;
    }
    @keyframes fadein { from {bottom: 0; opacity: 0;} to {bottom: 30px; opacity: 1;} }
    @keyframes fadeout { from {bottom: 30px; opacity: 1;} to {bottom: 0; opacity: 0;} }
    </style>
</head>
<body class="bg-gray-100">
    <div class="container mx-auto p-4">
        <div class="flex justify-between items-center mb-6">
            <h1 class="text-3xl font-bold">FinPilot IE - Financeiro Pessoal</h1>
            <div class="flex items-center space-x-4">
                <select id="owner-filter" class="p-2 border rounded">
                    <option value="">Todas as Pessoas</option>
                </select>
                <button id="logout-button" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">Sair</button>
            </div>
        </div>

        <div class="bg-white p-6 rounded-lg shadow-md mb-6">
            <div class="flex border-b border-gray-200">
                <button class="tab-button py-2 px-4 text-gray-600 hover:text-blue-600 active" data-tab="dashboard">Dashboard</button>
                <button class="tab-button py-2 px-4 text-gray-600 hover:text-blue-600" data-tab="accounts">Contas</button>
                <button class="tab-button py-2 px-4 text-gray-600 hover:text-blue-600" data-tab="transactions">Transações</button>
                <button class="tab-button py-2 px-4 text-gray-600 hover:text-blue-600" data-tab="categories">Categorias</button>
                <button class="tab-button py-2 px-4 text-gray-600 hover:text-blue-600" data-tab="recurring">Recorrentes</button>
                <button class="tab-button py-2 px-4 text-gray-600 hover:text-blue-600" data-tab="budgets">Orçamento</button>
                <button class="tab-button py-2 px-4 text-gray-600 hover:text-blue-600" data-tab="debts">Dívidas</button>
                <button class="tab-button py-2 px-4 text-gray-600 hover:text-blue-600" data-tab="reports">Relatórios</button>
                <button class="tab-button py-2 px-4 text-gray-600 hover:text-blue-600" data-tab="settings">Configurações</button>
            </div>

            <!-- Dashboard Tab -->
            <div id="dashboard" class="tab-content active p-4">
                <h2 class="text-2xl font-semibold mb-4">Dashboard</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="bg-blue-50 p-4 rounded-lg shadow">
                        <h3 class="font-bold text-lg">Saldo Total</h3>
                        <p id="total-balance" class="text-3xl font-extrabold text-blue-700">€0.00</p>
                    </div>
                    <div class="bg-green-50 p-4 rounded-lg shadow">
                        <h3 class="font-bold text-lg">Receitas Mês</h3>
                        <p id="monthly-income" class="text-3xl font-extrabold text-green-700">€0.00</p>
                    </div>
                    <div class="bg-red-50 p-4 rounded-lg shadow">
                        <h3 class="font-bold text-lg">Despesas Mês</h3>
                        <p id="monthly-expenses" class="text-3xl font-extrabold text-red-700">€0.00</p>
                    </div>
                </div>
                <div class="mt-6">
                    <h3 class="text-xl font-semibold mb-3">Próximas Recorrências</h3>
                    <div id="upcoming-recurring-list" class="space-y-2">
                        <p class="text-gray-500">Nenhuma recorrência futura.</p>
                    </div>
                </div>
            </div>

            <!-- Accounts Tab -->
            <div id="accounts" class="tab-content p-4">
                <div class="tab-header">
                    <h2 class="text-2xl font-semibold">Contas</h2>
                    <button id="add-account-button" class="fab-add" title="Nova conta">+</button>
                </div>
                <div id="accounts-list" class="space-y-3">
                    <p class="text-gray-500">Nenhuma conta cadastrada.</p>
                </div>
            </div>

            <!-- Transactions Tab -->
            <div id="transactions" class="tab-content p-4">
                <h2 class="text-2xl font-semibold mb-4">Transações</h2>
                <div class="flex justify-between items-center mb-4">
                    <button id="add-transaction-button" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded">Adicionar Transação</button>
                    <div class="flex space-x-2">
                        <input type="date" id="transaction-start-date" class="p-2 border rounded">
                        <input type="date" id="transaction-end-date" class="p-2 border rounded">
                        <input type="text" id="transaction-search" placeholder="Buscar..." class="p-2 border rounded">
                        <button id="export-transactions-button" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Exportar CSV</button>
                        <button id="import-transactions-button" class="bg-purple-500 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded">Importar CSV</button>
                    </div>
                </div>
                <div class="overflow-x-auto">
                    <table class="min-w-full bg-white border border-gray-200">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 border-b">Pessoa</th>
                                <th class="py-2 px-4 border-b">Data</th>
                                <th class="py-2 px-4 border-b">Descrição</th>
                                <th class="py-2 px-4 border-b">Valor</th>
                                <th class="py-2 px-4 border-b">Conta</th>
                                <th class="py-2 px-4 border-b">Categoria</th>
                                <th class="py-2 px-4 border-b">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="transactions-table-body">
                            <tr><td colspan="7" class="text-center py-4 text-gray-500">Nenhuma transação cadastrada.</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Categories Tab -->
            <div id="categories" class="tab-content p-4">
                <h2 class="text-2xl font-semibold mb-4">Categorias</h2>
                <button id="add-category-button" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded mb-4">Adicionar Categoria</button>
                <div class="overflow-x-auto">
                    <table class="min-w-full bg-white border border-gray-200">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 border-b">Pessoa</th>
                                <th class="py-2 px-4 border-b">Nome</th>
                                <th class="py-2 px-4 border-b">Tipo</th>
                                <th class="py-2 px-4 border-b">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="categories-table-body">
                            <tr><td colspan="4" class="text-center py-4 text-gray-500">Nenhuma categoria cadastrada.</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Recurring Tab -->
            <div id="recurring" class="tab-content p-4">
                <h2 class="text-2xl font-semibold mb-4">Recorrências</h2>
                <button id="add-recurring-button" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded mb-4">Adicionar Recorrência</button>
                <button id="run-recurring-button" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mb-4 ml-2">Lançar Recorrências do Mês</button>
                <div class="overflow-x-auto">
                    <table class="min-w-full bg-white border border-gray-200">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 border-b">Pessoa</th>
                                <th class="py-2 px-4 border-b">Título</th>
                                <th class="py-2 px-4 border-b">Valor</th>
                                <th class="py-2 px-4 border-b">Frequência</th>
                                <th class="py-2 px-4 border-b">Próximo Lançamento</th>
                                <th class="py-2 px-4 border-b">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="recurring-table-body">
                            <tr><td colspan="6" class="text-center py-4 text-gray-500">Nenhuma recorrência cadastrada.</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Budgets Tab -->
            <div id="budgets" class="tab-content p-4">
                <h2 class="text-2xl font-semibold mb-4">Orçamento Mensal</h2>
                <div class="flex items-center mb-4">
                    <select id="budget-month-filter" class="p-2 border rounded mr-2"></select>
                    <button id="add-budget-button" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded">Definir Orçamento</button>
                </div>
                <div id="budgets-list" class="space-y-4">
                    <p class="text-gray-500">Nenhum orçamento definido para este mês.</p>
                </div>
            </div>

            <!-- Debts Tab -->
            <div id="debts" class="tab-content p-4">
                <h2 class="text-2xl font-semibold mb-4">Dívidas</h2>
                <button id="add-debt-button" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded mb-4">Adicionar Dívida</button>
                <div class="overflow-x-auto">
                    <table class="min-w-full bg-white border border-gray-200">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 border-b">Pessoa</th>
                                <th class="py-2 px-4 border-b">Nome</th>
                                <th class="py-2 px-4 border-b">Valor Original</th>
                                <th class="py-2 px-4 border-b">Valor Atual</th>
                                <th class="py-2 px-4 border-b">Juros (%)</th>
                                <th class="py-2 px-4 border-b">Juros Mensal Est.</th>
                                <th class="py-2 px-4 border-b">Vencimento</th>
                                <th class="py-2 px-4 border-b">Status</th>
                                <th class="py-2 px-4 border-b">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="debts-table-body">
                            <tr><td colspan="9" class="text-center py-4 text-gray-500">Nenhuma dívida cadastrada.</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Reports Tab -->
            <div id="reports" class="tab-content p-4">
                <h2 class="text-2xl font-semibold mb-4">Relatórios</h2>
                <div class="flex items-center mb-4">
                    <select id="report-month-filter" class="p-2 border rounded mr-2"></select>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="text-xl font-semibold mb-2">Fluxo de Caixa Mensal</h3>
                        <canvas id="cash-flow-chart"></canvas>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold mb-2">Despesas por Categoria</h3>
                        <canvas id="expenses-by-category-chart"></canvas>
                    </div>
                    <div class="md:col-span-2">
                        <h3 class="text-xl font-semibold mb-2">Saldo das Contas</h3>
                        <canvas id="account-balance-chart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Settings Tab -->
            <div id="settings" class="tab-content p-4">
                <h2 class="text-2xl font-semibold mb-4">Configurações</h2>
                <div class="mb-6">
                    <h3 class="text-xl font-semibold mb-3">Gerenciar Pessoas</h3>
                    <div class="flex mb-2">
                        <input type="text" id="new-person-name" placeholder="Nome da Pessoa" class="p-2 border rounded flex-grow mr-2">
                        <button id="add-person-button" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Adicionar</button>
                    </div>
                    <ul id="people-list" class="list-disc pl-5">
                        <li class="text-gray-500">Nenhuma pessoa cadastrada.</li>
                    </ul>
                </div>
                <div class="mb-6">
                    <h3 class="text-xl font-semibold mb-3">Configurações de Renda</h3>
                    <p class="text-gray-600">Defina as regras de renda para cada pessoa. Estas regras gerarão transações recorrentes automaticamente.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Account Modal -->
    <div id="account-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="account-modal-title">Nova Conta</h3>
                <button class="close-button" data-modal="account-modal">&times;</button>
            </div>
            <form id="account-form">
                <input type="hidden" id="account-id">
                <div class="form-row">
                    <label for="account-owner-name">Pessoa:</label>
                    <select id="account-owner-name" required></select>
                </div>
                <div class="form-row">
                    <label for="account-name">Nome da Conta:</label>
                    <input type="text" id="account-name" placeholder="Ex: Conta Corrente" required>
                </div>
                <div class="form-row">
                    <label for="account-bank">Banco:</label>
                    <input type="text" id="account-bank" placeholder="Ex: Millennium">
                </div>
                <div class="form-row">
                    <label for="account-balance">Saldo Inicial (EUR):</label>
                    <input type="number" id="account-balance" step="0.01" placeholder="0.00" required>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" data-modal="account-modal">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Transaction Modal -->
    <div id="transaction-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="transaction-modal-title">Adicionar Transação</h3>
                <button class="close-button" data-modal="transaction-modal">&times;</button>
            </div>
            <form id="transaction-form">
                <input type="hidden" id="transaction-id">
                <div class="form-row">
                    <label for="transaction-owner-name">Pessoa:</label>
                    <select id="transaction-owner-name" required></select>
                </div>
                <div class="form-row">
                    <label for="transaction-date">Data:</label>
                    <input type="date" id="transaction-date" required>
                </div>
                <div class="form-row">
                    <label for="transaction-description">Descrição:</label>
                    <input type="text" id="transaction-description" required>
                </div>
                <div class="form-row">
                    <label for="transaction-amount">Valor:</label>
                    <input type="number" id="transaction-amount" step="0.01" required>
                </div>
                <div class="form-row">
                    <label for="transaction-account">Conta:</label>
                    <select id="transaction-account" required></select>
                </div>
                <div class="form-row">
                    <label for="transaction-category">Categoria:</label>
                    <select id="transaction-category" required></select>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" data-modal="transaction-modal">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Category Modal -->
    <div id="category-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="category-modal-title">Adicionar Categoria</h3>
                <button class="close-button" data-modal="category-modal">&times;</button>
            </div>
            <form id="category-form">
                <input type="hidden" id="category-id">
                <div class="form-row">
                    <label for="category-owner-name">Pessoa:</label>
                    <select id="category-owner-name" required></select>
                </div>
                <div class="form-row">
                    <label for="category-name">Nome da Categoria:</label>
                    <input type="text" id="category-name" required>
                </div>
                <div class="form-row">
                    <label for="category-type">Tipo:</label>
                    <select id="category-type" required>
                        <option value="expense">Despesa</option>
                        <option value="income">Receita</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" data-modal="category-modal">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Recurring Rule Modal -->
    <div id="recurring-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="recurring-modal-title">Adicionar Recorrência</h3>
                <button class="close-button" data-modal="recurring-modal">&times;</button>
            </div>
            <form id="recurring-form">
                <input type="hidden" id="recurring-id">
                <div class="form-row">
                    <label for="recurring-owner-name">Pessoa:</label>
                    <select id="recurring-owner-name" required></select>
                </div>
                <div class="form-row">
                    <label for="recurring-title">Título:</label>
                    <input type="text" id="recurring-title" required>
                </div>
                <div class="form-row">
                    <label for="recurring-amount">Valor:</label>
                    <input type="number" id="recurring-amount" step="0.01" required>
                </div>
                <div class="form-row">
                    <label for="recurring-type">Tipo:</label>
                    <select id="recurring-type" required>
                        <option value="expense">Despesa</option>
                        <option value="income">Receita</option>
                    </select>
                </div>
                <div class="form-row">
                    <label for="recurring-account">Conta:</label>
                    <select id="recurring-account" required></select>
                </div>
                <div class="form-row">
                    <label for="recurring-category">Categoria:</label>
                    <select id="recurring-category" required></select>
                </div>
                <div class="form-row">
                    <label for="recurring-frequency">Frequência:</label>
                    <select id="recurring-frequency" required>
                        <option value="weekly">Semanal</option>
                        <option value="biweekly">Quinzenal (a cada 14 dias)</option>
                        <option value="monthly">Mensal</option>
                    </select>
                </div>
                <div id="recurring-schedule-options" class="form-row"></div>
                <div class="form-row">
                    <label for="recurring-start-date">Data de Início:</label>
                    <input type="date" id="recurring-start-date" required>
                </div>
                <div class="form-row">
                    <label for="recurring-end-date">Data de Fim (Opcional):</label>
                    <input type="date" id="recurring-end-date">
                </div>
                <div class="form-row">
                    <label for="recurring-hourly-rate">Taxa por Hora (Opcional, para Semanal):</label>
                    <input type="number" id="recurring-hourly-rate" step="0.01">
                </div>
                <div class="form-row">
                    <label for="recurring-hours-per-week">Horas por Semana (Opcional, para Semanal):</label>
                    <input type="number" id="recurring-hours-per-week" step="0.01">
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" data-modal="recurring-modal">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Budget Modal -->
    <div id="budget-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="budget-modal-title">Definir Orçamento</h3>
                <button class="close-button" data-modal="budget-modal">&times;</button>
            </div>
            <form id="budget-form">
                <input type="hidden" id="budget-id">
                <div class="form-row">
                    <label for="budget-owner-name">Pessoa:</label>
                    <select id="budget-owner-name" required></select>
                </div>
                <div class="form-row">
                    <label for="budget-month">Mês:</label>
                    <input type="month" id="budget-month" required>
                </div>
                <div class="form-row">
                    <label for="budget-category">Categoria:</label>
                    <select id="budget-category" required></select>
                </div>
                <div class="form-row">
                    <label for="budget-amount">Valor do Orçamento:</label>
                    <input type="number" id="budget-amount" step="0.01" required>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" data-modal="budget-modal">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Debt Modal -->
    <div id="debt-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="debt-modal-title">Adicionar Dívida</h3>
                <button class="close-button" data-modal="debt-modal">&times;</button>
            </div>
            <form id="debt-form">
                <input type="hidden" id="debt-id">
                <div class="form-row">
                    <label for="debt-owner-name">Pessoa:</label>
                    <select id="debt-owner-name" required></select>
                </div>
                <div class="form-row">
                    <label for="debt-name">Nome da Dívida:</label>
                    <input type="text" id="debt-name" required>
                </div>
                <div class="form-row">
                    <label for="debt-original-amount">Valor Original:</label>
                    <input type="number" id="debt-original-amount" step="0.01" required>
                </div>
                <div class="form-row">
                    <label for="debt-current-amount">Valor Atual:</label>
                    <input type="number" id="debt-current-amount" step="0.01" required>
                </div>
                <div class="form-row">
                    <label for="debt-interest-rate">Taxa de Juros Anual (%):</label>
                    <input type="number" id="debt-interest-rate" step="0.01" min="0">
                </div>
                <div class="form-row">
                    <label for="debt-interest-type">Tipo de Juros:</label>
                    <select id="debt-interest-type">
                        <option value="simple">Simples</option>
                        <option value="compound">Composto</option>
                    </select>
                </div>
                <div class="form-row">
                    <label for="debt-due-date">Data de Vencimento (Opcional):</label>
                    <input type="date" id="debt-due-date">
                </div>
                <div class="form-row">
                    <label for="debt-is-closed">Dívida Fechada:</label>
                    <input type="checkbox" id="debt-is-closed" class="form-checkbox h-5 w-5 text-blue-600">
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" data-modal="debt-modal">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Import CSV Modal -->
    <div id="import-csv-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Importar Transações CSV</h3>
                <button class="close-button" data-modal="import-csv-modal">&times;</button>
            </div>
            <form id="import-csv-form">
                <div class="form-row">
                    <label for="csv-file">Arquivo CSV:</label>
                    <input type="file" id="csv-file" accept=".csv" required>
                </div>
                <div class="form-row">
                    <label for="csv-owner-name">Pessoa (para todas as transações do CSV):</label>
                    <select id="csv-owner-name" required></select>
                </div>
                <div class="form-row">
                    <label for="csv-account">Conta Padrão (para todas as transações do CSV):</label>
                    <select id="csv-account" required></select>
                </div>
                <div class="form-row">
                    <label for="csv-category">Categoria Padrão (para todas as transações do CSV):</label>
                    <select id="csv-category" required></select>
                </div>
                <div class="form-row">
                    <p class="text-gray-700 text-sm font-bold mb-2">Mapeamento de Colunas CSV:</p>
                    <div id="csv-column-mapping" class="space-y-2"></div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" data-modal="import-csv-modal">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Importar</button>
                </div>
            </form>
        </div>
    </div>

    <div id="toast" class="toast"></div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.js"></script>
    <script type="module" src="./finance.js"></script>
</body>
</html>
