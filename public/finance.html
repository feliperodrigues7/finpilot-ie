<!DOCTYPE html>
<html lang="pt-PT">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FinPilot IE</title>
  <style>
    :root {
      --bg: #0b1020;
      --panel: #121937;
      --panel-2: #0f1530;
      --text: #eef2ff;
      --muted: #aab3d9;
      --accent: #7aa2ff;
      --accent-2: #88e1ff;
      --danger: #ff6b6b;
      --success: #36d399;
      --warning: #ffd166;
      --badge-despesa: #ff7a7a;
      --badge-receita: #4cd3a8;
      --badge-transfer: #88e1ff;
      --border: #223064;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: linear-gradient(180deg, #0b1020, #0c1230 35%, #0a0f26);
      color: var(--text);
    }
    header {
      padding: 16px 20px; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid var(--border);
      background: rgba(10, 16, 40, 0.6); backdrop-filter: blur(6px); position: sticky; top: 0; z-index: 10;
    }
    header .brand {
      display: flex; gap: 10px; align-items: center; font-weight: 700; letter-spacing: 0.5px;
    }
    header .brand .dot { width: 10px; height: 10px; border-radius: 50%; background: linear-gradient(135deg, var(--accent), var(--accent-2)); box-shadow: 0 0 16px var(--accent); }
    header .actions { display: flex; align-items: center; gap: 12px; }
    .btn {
      background: linear-gradient(135deg, #1a2458, #17214d); border: 1px solid var(--border);
      color: var(--text); padding: 8px 12px; border-radius: 8px; cursor: pointer; transition: transform .06s ease, background .2s;
    }
    .btn:hover { transform: translateY(-1px); background: linear-gradient(135deg, #1e2a66, #1a265c); }
    .btn.danger { background: linear-gradient(135deg, #5a1e2a, #4d1721); border-color: #6a2630; }
    .btn.danger:hover { background: linear-gradient(135deg, #6a2630, #5a1e2a); }
    .btn.secondary { background: linear-gradient(135deg, #243055, #1b2548); }
    .btn.primary { background: linear-gradient(135deg, #2044a0, #19398a); border-color: #2a54c4; }

    main { display: grid; grid-template-columns: 220px 1fr; gap: 16px; padding: 16px; }
    nav {
      background: linear-gradient(180deg, #0f1530, #0c1230); border: 1px solid var(--border); border-radius: 12px; padding: 10px;
      position: sticky; top: 76px; height: calc(100vh - 92px); overflow: auto;
    }
    nav .nav-btn {
      width: 100%; text-align: left; border-radius: 10px; margin: 6px 0; padding: 10px 12px; color: var(--muted);
      background: transparent; border: 1px solid transparent; cursor: pointer;
    }
    nav .nav-btn.active { color: var(--text); background: linear-gradient(135deg, #18224a, #131c3d); border-color: var(--border); }
    section.content {
      background: linear-gradient(180deg, #10173a, #0f1534); border: 1px solid var(--border); border-radius: 12px; padding: 16px;
    }
    .grid-cards {
      display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 12px;
    }
    .card {
      border: 1px solid var(--border); border-radius: 12px; padding: 14px; background: linear-gradient(180deg, #111a3f, #101739);
      box-shadow: inset 0 0 0 1px #0c1230;
    }
    .card h3 { margin: 0 0 8px; font-size: 14px; color: var(--muted); font-weight: 600; }
    .card h3 .accent { color: var(--accent-2); }
    .card .value { font-size: 22px; font-weight: 700; margin-bottom: 4px; }
    .card .sub { font-size: 12px; color: var(--muted); }

    .toolbar { display: flex; gap: 8px; align-items: center; margin-bottom: 12px; }
    .toolbar .spacer { flex: 1; }
    .section-title { font-size: 16px; margin: 12px 0; }

    table { width: 100%; border-collapse: collapse; }
    th, td { border-bottom: 1px solid var(--border); padding: 10px 8px; font-size: 14px; }
    th { text-align: left; color: var(--muted); font-weight: 600; }
    tr:hover td { background: rgba(255,255,255,0.02); }

    .form { border: 1px dashed var(--border); border-radius: 10px; padding: 12px; background: linear-gradient(180deg, #0f1532, #0e1430); margin-bottom: 12px; }
    .form .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 10px; }
    .form .form-group { display: flex; flex-direction: column; gap: 6px; }
    label { font-size: 12px; color: var(--muted); }
    input, select {
      background: #0c1230; border: 1px solid var(--border); border-radius: 8px; color: var(--text); padding: 8px 10px;
      outline: none; transition: border-color .2s;
    }
    input:focus, select:focus { border-color: var(--accent); }

    .badges { display: inline-flex; gap: 6px; flex-wrap: wrap; }
    .badge {
      display: inline-block; padding: 3px 8px; font-size: 12px; border-radius: 999px; border: 1px solid var(--border); color: var(--text);
      background: #0d1332;
    }
    .badge.despesa { background: rgba(255, 90, 90, .12); border-color: rgba(255, 90, 90, .3); color: #ffb0b0; }
    .badge.receita { background: rgba(76, 211, 168, .12); border-color: rgba(76, 211, 168, .3); color: #9be8cd; }
    .badge.transfer { background: rgba(136, 225, 255, .12); border-color: rgba(136, 225, 255, .3); color: #b6f0ff; }

    .modal {
      position: fixed; inset: 0; display: none; align-items: center; justify-content: center;
      background: rgba(0,0,0,0.45); z-index: 50; padding: 16px;
    }
    .modal.show { display: flex; }
    .modal-content {
      width: 100%; max-width: 720px; background: linear-gradient(180deg, #12193a, #0f1532); border: 1px solid var(--border);
      border-radius: 12px; box-shadow: 0 10px 40px rgba(0,0,0,0.35);
    }
    .modal-header {
      display: flex; align-items: center; justify-content: space-between; padding: 12px 14px; border-bottom: 1px solid var(--border);
    }
    .modal-header h2 { margin: 0; font-size: 18px; }
    .modal-footer { display: flex; justify-content: flex-end; gap: 8px; padding: 12px 14px; border-top: 1px solid var(--border); }
    .btn-modal { padding: 8px 12px; border-radius: 8px; border: 1px solid var(--border); background: #17214d; color: var(--text); cursor: pointer; }
    .close-button {
      background: transparent; color: var(--muted); border: none; font-size: 22px; cursor: pointer; padding: 0 6px;
    }
    .help { color: var(--muted); font-size: 12px; }
    .accent { color: var(--accent-2); }
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="dot"></div>
      <div>FinPilot IE</div>
    </div>
    <div class="actions">
      <button id="btn-sair" class="btn">Sair</button>
    </div>
  </header>

  <main>
    <nav>
      <button class="nav-btn active" data-tab="tab-dashboard">Dashboard</button>
      <button class="nav-btn" data-tab="tab-contas">Contas</button>
      <button class="nav-btn" data-tab="tab-gastos">Gastos</button>
      <button class="nav-btn" data-tab="tab-salarios">Salários</button>
      <button class="nav-btn" data-tab="tab-transacoes">Transferências</button>
      <button class="nav-btn" data-tab="tab-categorias">Categorias</button>
      <button class="nav-btn" data-tab="tab-recorrentes">Despesas Fixas</button>
      <button class="nav-btn" data-tab="tab-dividas">Dívidas</button>
    </nav>

    <section class="content">
      <div id="tab-dashboard" class="tab-pane">
        <h2 class="section-title">Resumo</h2>
        <div class="grid-cards" id="dashboard-cards"></div>
        <div class="form" style="margin-top:12px;">
          <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));">
            <div class="card">
              <h3>Total em Contas</h3>
              <div id="dashboard-total" class="value">€ 0,00</div>
              <div class="sub">Soma de todos os saldos atuais</div>
            </div>
          </div>
        </div>

        <h3 class="section-title">Despesas Fixas por Titular</h3>
        <div class="grid-cards" id="dashboard-fixas"></div>

        <h3 class="section-title">Dívidas por Título e Titular</h3>
        <div class="grid-cards" id="dashboard-dividas"></div>
      </div>

      <div id="tab-contas" class="tab-pane" style="display:none;">
        <div class="toolbar">
          <h2 class="section-title" style="margin:0;">Minhas Contas</h2>
          <div class="spacer"></div>
          <button id="btn-open-account-modal" class="btn primary">+ Nova conta</button>
        </div>

        <table>
          <thead>
            <tr>
              <th>Titular</th>
              <th>Banco</th>
              <th>Tipo de Conta</th>
              <th>Saldo Inicial</th>
              <th>Saldo Atual</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody id="tbl-contas-body"></tbody>
        </table>
      </div>

      <div id="tab-gastos" class="tab-pane" style="display:none;">
        <h2 class="section-title">Gastos</h2>
        <form id="form-gasto" class="form">
          <div class="grid">
            <div class="form-group">
              <label for="gs-data">Data</label>
              <input type="date" id="gs-data" />
            </div>
            <div class="form-group">
              <label for="gs-titular">Titular</label>
              <select id="gs-titular"></select>
            </div>
            <div class="form-group">
              <label for="gs-banco">Banco</label>
              <select id="gs-banco"></select>
            </div>
            <div class="form-group">
              <label for="gs-desc">Descrição</label>
              <input type="text" id="gs-desc" placeholder="Ex.: Mercado" />
            </div>
            <div class="form-group">
              <label for="gs-valor">Valor</label>
              <input type="number" step="0.01" id="gs-valor" placeholder="0,00" />
            </div>
          </div>
          <div style="margin-top:8px; display:flex; justify-content:flex-end; gap:8px;">
            <button type="submit" class="btn">Adicionar Gasto</button>
          </div>
        </form>

        <table>
          <thead>
            <tr>
              <th>Data</th>
              <th>Titular</th>
              <th>Banco</th>
              <th>Descrição</th>
              <th>Valor</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody id="tbl-gastos-body"></tbody>
        </table>
      </div>

      <div id="tab-salarios" class="tab-pane" style="display:none;">
        <h2 class="section-title">Salários</h2>
        <form id="form-salario" class="form">
          <div class="grid">
            <div class="form-group">
              <label for="sl-data">Data</label>
              <input type="date" id="sl-data" />
            </div>
            <div class="form-group">
              <label for="sl-nome">Titular</label>
              <select id="sl-nome"></select>
            </div>
            <div class="form-group">
              <label for="sl-banco">Banco</label>
              <select id="sl-banco"></select>
            </div>
            <div class="form-group">
              <label for="sl-horas">Horas</label>
              <input type="number" step="0.01" id="sl-horas" placeholder="Opcional" />
            </div>
            <div class="form-group">
              <label for="sl-valor">Valor</label>
              <input type="number" step="0.01" id="sl-valor" placeholder="0,00" />
            </div>
          </div>
          <div style="margin-top:8px; display:flex; justify-content:flex-end; gap:8px;">
            <button type="submit" class="btn">Adicionar Salário</button>
          </div>
        </form>

        <table>
          <thead>
            <tr>
              <th>Data</th>
              <th>Titular</th>
              <th>Banco</th>
              <th>Horas</th>
              <th>Valor</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody id="tbl-salarios-body"></tbody>
        </table>
      </div>

      <div id="tab-transacoes" class="tab-pane" style="display:none;">
        <h2 class="section-title">Transferências</h2>
        <form id="form-transacao" class="form">
          <div class="grid">
            <div class="form-group">
              <label for="tx-data">Data</label>
              <input type="date" id="tx-data" />
            </div>

            <div class="form-group">
              <label for="tx-de-titular">De • Titular</label>
              <select id="tx-de-titular"></select>
            </div>
            <div class="form-group">
              <label for="tx-de-banco">De • Banco</label>
              <select id="tx-de-banco"></select>
            </div>

            <div class="form-group">
              <label for="tx-para-titular">Para • Titular</label>
              <select id="tx-para-titular"></select>
            </div>
            <div class="form-group">
              <label for="tx-para-banco">Para • Banco</label>
              <select id="tx-para-banco"></select>
            </div>

            <div class="form-group">
              <label for="tx-valor">Valor</label>
              <input type="number" step="0.01" id="tx-valor" placeholder="0,00" />
            </div>
            <div class="form-group">
              <label for="tx-desc">Descrição</label>
              <input type="text" id="tx-desc" placeholder="Opcional" />
            </div>
          </div>
          <div style="margin-top:8px; display:flex; justify-content:flex-end; gap:8px;">
            <button type="submit" class="btn">Transferir</button>
          </div>
        </form>

        <table>
          <thead>
            <tr>
              <th>Data</th>
              <th>Tipo</th>
              <th>De</th>
              <th>Para</th>
              <th>Valor</th>
              <th>Descrição</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody id="tbl-transacoes-body"></tbody>
        </table>
      </div>

      <div id="tab-categorias" class="tab-pane" style="display:none;">
        <h2 class="section-title">Categorias</h2>
        <form id="form-categoria" class="form">
          <div class="grid">
            <div class="form-group">
              <label for="cat-nome">Nome</label>
              <input type="text" id="cat-nome" placeholder="Ex.: Mercado, Aluguel..." />
            </div>
            <div class="form-group">
              <label for="cat-tipo">Tipo</label>
              <select id="cat-tipo">
                <option value="despesa">Despesa</option>
                <option value="receita">Receita</option>
              </select>
            </div>
          </div>
          <div style="margin-top:8px; display:flex; justify-content:flex-end; gap:8px;">
            <button type="submit" class="btn">Guardar</button>
          </div>
        </form>

        <table>
          <thead>
            <tr>
              <th>Nome</th>
              <th>Tipo</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody id="tbl-categorias-body"></tbody>
        </table>
      </div>

      <div id="tab-recorrentes" class="tab-pane" style="display:none;">
        <h2 class="section-title">Despesas Fixas</h2>
        <form id="form-recorrente" class="form">
          <div class="grid">
            <div class="form-group">
              <label for="rc-categoria">Nome (Tipo de Despesa)</label>
              <select id="rc-categoria"></select>
              <div class="help">Dica: adicione nomes novos em Categorias (como Despesa).</div>
            </div>
            <div class="form-group">
              <label for="rc-valor">Valor</label>
              <input type="number" step="0.01" id="rc-valor" placeholder="0,00" />
            </div>
            <div class="form-group">
              <label for="rc-data">Data (fixa)</label>
              <input type="date" id="rc-data" />
            </div>
            <div class="form-group">
              <label for="rc-semana">Semana do mês</label>
              <select id="rc-semana">
                <option value="">—</option>
                <option value="1">1ª</option>
                <option value="2">2ª</option>
                <option value="3">3ª</option>
                <option value="4">4ª</option>
                <option value="5">5ª</option>
              </select>
            </div>
            <div class="form-group">
              <label for="rc-dia-semana">Dia da semana</label>
              <select id="rc-dia-semana">
                <option value="">—</option>
                <option value="1">Seg</option>
                <option value="2">Ter</option>
                <option value="3">Qua</option>
                <option value="4">Qui</option>
                <option value="5">Sex</option>
                <option value="6">Sáb</option>
                <option value="0">Dom</option>
              </select>
            </div>
            <div class="form-group">
              <label for="rc-titular">Titular (quem paga)</label>
              <select id="rc-titular"></select>
            </div>
          </div>
          <div style="margin-top:8px; display:flex; justify-content:flex-end; gap:8px;">
            <button type="submit" class="btn">Guardar</button>
          </div>
        </form>

        <table>
          <thead>
            <tr>
              <th>Nome</th>
              <th>Titular</th>
              <th>Valor</th>
              <th>Data</th>
              <th>Semana/Dia</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody id="tbl-recorrentes-body"></tbody>
        </table>
      </div>

      <div id="tab-dividas" class="tab-pane" style="display:none;">
        <h2 class="section-title">Dívidas</h2>
        <form id="form-divida" class="form">
          <div class="grid">
            <div class="form-group">
              <label for="dv-categoria">Nome (Tipo de Despesa)</label>
              <select id="dv-categoria"></select>
            </div>
            <div class="form-group">
              <label for="dv-valor">Valor</label>
              <input type="number" step="0.01" id="dv-valor" placeholder="0,00" />
            </div>
            <div class="form-group">
              <label for="dv-vencimento">Vencimento</label>
              <input type="date" id="dv-vencimento" />
            </div>
            <div class="form-group">
              <label for="dv-fim">Fim (opcional)</label>
              <input type="date" id="dv-fim" />
            </div>
            <div class="form-group">
              <label for="dv-semana">Semana do mês</label>
              <select id="dv-semana">
                <option value="">—</option>
                <option value="1">1ª</option>
                <option value="2">2ª</option>
                <option value="3">3ª</option>
                <option value="4">4ª</option>
                <option value="5">5ª</option>
              </select>
            </div>
            <div class="form-group">
              <label for="dv-titular">Titular</label>
              <select id="dv-titular"></select>
            </div>
          </div>
          <div style="margin-top:8px; display:flex; justify-content:flex-end; gap:8px;">
            <button type="submit" class="btn">Guardar</button>
          </div>
        </form>

        <table>
          <thead>
            <tr>
              <th>Nome</th>
              <th>Titular</th>
              <th>Valor</th>
              <th>Vencimento</th>
              <th>Fim</th>
              <th>Semana</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody id="tbl-dividas-body"></tbody>
        </table>
      </div>
    </section>
  </main>

  <!-- Modal de Conta -->
  <div id="account-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="account-modal-title">Nova Conta</h2>
        <button class="close-button" data-modal="account-modal" aria-label="Fechar">&times;</button>
      </div>
      <form id="account-form">
        <input type="hidden" id="account-id" />
        <div class="grid" style="padding: 12px;">
          <div class="form-group">
            <label for="account-owner-name">Pessoa (Titular)</label>
            <input type="text" id="account-owner-name" placeholder="Ex.: João" />
          </div>
          <div class="form-group">
            <label for="account-name">Tipo de Conta</label>
            <input type="text" id="account-name" placeholder="Ex.: Corrente, Poupança..." />
          </div>
          <div class="form-group">
            <label for="account-bank">Banco</label>
            <input type="text" id="account-bank" placeholder="Ex.: Santander" />
          </div>
          <div class="form-group">
            <label for="account-balance">Saldo Inicial</label>
            <input type="number" step="0.01" id="account-balance" placeholder="0,00" />
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-modal secondary" data-modal="account-modal">Cancelar</button>
          <button type="submit" class="btn btn-modal">Guardar</button>
        </div>
      </form>
    </div>
  </div>

  <script src="finance.js"></script>
</body>
</html>
