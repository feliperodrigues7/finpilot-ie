<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>FinPilot IE</title>
  <style>
    :root {
      --bg: #f6f8fb;
      --panel: #ffffff;
      --text: #0f172a;
      --muted: #475569;
      --border: #e5e7eb;
      --primary: #2563eb;
      --primary-2: #1d4ed8;
      --success: #16a34a;
      --danger: #ef4444;
      --warning: #f59e0b;
      --info: #06b6d4;
      --accent-1: #8b5cf6;
      --accent-2: #f43f5e;
    }
    * { box-sizing: border-box; }
    html, body {
      margin: 0;
      padding: 0;
      background: var(--bg);
      color: var(--text);
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Ubuntu, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
      min-height: 100%;
    }
    a { color: var(--primary); text-decoration: none; }
    a:hover { text-decoration: underline; }

    .wrap {
      max-width: 1100px;
      margin: 24px auto 56px auto;
      padding: 0 16px;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 16px;
      gap: 12px;
    }
    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .logo {
      width: 36px;
      height: 36px;
      border-radius: 8px;
      background: conic-gradient(from 0deg, var(--primary), var(--success), var(--accent-1), var(--accent-2), var(--primary));
      box-shadow: 0 6px 16px rgba(37, 99, 235, 0.25);
    }
    .title {
      font-weight: 800;
      font-size: 20px;
      letter-spacing: 0.2px;
    }
    .muted { color: var(--muted); font-size: 13px; }

    nav.tabs {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      background: #ffffff;
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 8px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.06);
    }
    nav.tabs button {
      appearance: none;
      border: 1px solid var(--border);
      background: #f8fafc;
      color: var(--text);
      padding: 10px 12px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 14px;
      transition: all .14s ease;
    }
    nav.tabs button:hover {
      transform: translateY(-1px);
      border-color: #cbd5e1;
      background: #f1f5f9;
    }
    nav.tabs button.active {
      background: linear-gradient(180deg, #e0ecff 0%, #dbeafe 100%);
      border-color: #bfdbfe;
      color: #1e40af;
      box-shadow: 0 6px 18px rgba(37, 99, 235, 0.20);
    }

    .panel {
      margin-top: 16px;
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 16px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.06);
    }

    .grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 14px;
    }
    @media (min-width: 980px) {
      .grid-2 { grid-template-columns: 1fr 1fr; }
    }

    h2 {
      margin: 0 0 12px 0;
      font-size: 16px;
      font-weight: 800;
      color: #0f172a;
    }

    .row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    .row-3 { grid-template-columns: 1fr 1fr 1fr; }
    .row-4 { grid-template-columns: 1fr 1fr 1fr 1fr; }
    .row-1 { grid-template-columns: 1fr; }

    label {
      font-size: 13px;
      color: var(--muted);
      margin-bottom: 6px;
      display: inline-block;
    }
    input, select, textarea {
      width: 100%;
      background: #ffffff;
      border: 1px solid #dbe2ea;
      color: var(--text);
      border-radius: 10px;
      padding: 10px 12px;
      font-size: 14px;
      outline: none;
      transition: border-color .12s ease, box-shadow .12s ease;
    }
    input:focus, select:focus, textarea:focus {
      border-color: #a3c3ff;
      box-shadow: 0 0 0 3px rgba(37,99,235,0.15);
    }
    textarea { min-height: 80px; resize: vertical; }

    .actions {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }
    .btn {
      appearance: none;
      border: 1px solid var(--border);
      background: #f8fafc;
      color: var(--text);
      padding: 10px 14px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 14px;
      transition: all .14s ease;
    }
    .btn:hover {
      transform: translateY(-1px);
      border-color: #cbd5e1;
      background: #f1f5f9;
    }
    .btn.primary {
      background: linear-gradient(180deg, #60a5fa 0%, #3b82f6 100%);
      color: #fff;
      border-color: #60a5fa;
    }
    .btn.danger {
      background: linear-gradient(180deg, #fda4af 0%, #f43f5e 100%);
      color: #fff;
      border-color: #fda4af;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      border: 1px solid var(--border);
      border-radius: 12px;
      overflow: hidden;
      background: #fff;
    }
    thead th {
      text-align: left;
      padding: 10px;
      font-weight: 700;
      font-size: 13px;
      color: #0f172a;
      background: #f1f5f9;
      border-bottom: 1px solid var(--border);
    }
    tbody td {
      padding: 10px;
      border-top: 1px solid var(--border);
      font-size: 14px;
      color: #0f172a;
    }
    tbody tr:hover {
      background: #f8fafc;
    }

    .tab-pane { display: none; }
    .note {
      margin: 8px 0 0 0;
      font-size: 12px;
      color: var(--muted);
    }

    .badge {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 700;
      color: #fff;
    }
    .badge.receita { background: var(--success); }
    .badge.despesa { background: var(--danger); }
    .badge.transfer { background: var(--info); }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo"></div>
        <div class="title">FinPilot IE</div>
      </div>
      <div class="muted">Pessoal • EUR</div>
    </header>

    <nav class="tabs">
      <button class="active" data-tab="tab-contas">Contas</button>
      <button data-tab="tab-transacoes">Transações</button>
      <button data-tab="tab-salarios">Salários</button>
      <button data-tab="tab-categorias">Categorias</button>
      <button data-tab="tab-recorrentes">Recorrentes</button>
      <button data-tab="tab-orcamento">Orçamento</button>
      <button data-tab="tab-dividas">Dívidas</button>
      <button data-tab="tab-relatorios">Relatórios</button>
      <button data-tab="tab-config">Configurações</button>
      <button id="btn-sair" title="Sair">Sair</button>
    </nav>

    <!-- Contas -->
    <section id="tab-contas" class="panel tab-pane" style="display:block">
      <div class="grid grid-2">
        <div>
          <h2>Nova/Editar Conta</h2>
          <form id="form-conta">
            <div class="row">
              <div>
                <label for="ct-titular">Titular (digite o nome)</label>
                <input id="ct-titular" type="text" placeholder="Ex.: João, Maria" />
              </div>
              <div>
                <label for="ct-tipo">Tipo de Conta</label>
                <input id="ct-tipo" type="text" placeholder="Ex.: Corrente, Poupança" />
              </div>
            </div>
            <div class="row">
              <div>
                <label for="ct-banco">Banco</label>
                <input id="ct-banco" type="text" placeholder="Ex.: Meu Banco" />
              </div>
              <div>
                <label for="ct-saldo-inicial">Saldo Inicial</label>
                <input id="ct-saldo-inicial" type="number" step="0.01" placeholder="0.00" />
              </div>
            </div>
            <div class="actions">
              <button class="btn primary" type="submit">Salvar Conta</button>
              <button class="btn" type="reset">Limpar</button>
            </div>
          </form>
          <p class="note">Saldo atual é recalculado com base no saldo inicial + transações.</p>
        </div>
        <div>
          <h2>Minhas Contas</h2>
          <table>
            <thead>
              <tr>
                <th>Titular</th>
                <th>Banco</th>
                <th>Tipo de Conta</th>
                <th>Saldo Inicial</th>
                <th>Saldo Atual</th>
                <th>Ações</th>
              </tr>
            </thead>
            <tbody id="tbl-contas-body"></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Transações -->
    <section id="tab-transacoes" class="panel tab-pane">
      <div class="grid grid-2">
        <div>
          <h2>Nova Transação ou Transferência</h2>
          <form id="form-transacao">
            <div class="row">
              <div>
                <label for="tx-data">Data</label>
                <input id="tx-data" type="date" />
              </div>
              <div>
                <label for="tx-valor">Valor</label>
                <input id="tx-valor" type="number" step="0.01" placeholder="0.00" />
              </div>
            </div>

            <div class="row">
              <div>
                <label for="tx-conta">Conta (para Receita/Despesa)</label>
                <select id="tx-conta"></select>
              </div>
              <div>
                <label for="tx-categoria">Categoria (Receita/Despesa)</label>
                <select id="tx-categoria"></select>
              </div>
            </div>

            <div class="row">
              <div>
                <label for="tx-de-conta">Transferência: De</label>
                <select id="tx-de-conta"></select>
              </div>
              <div>
                <label for="tx-para-conta">Transferência: Para</label>
                <select id="tx-para-conta"></select>
              </div>
            </div>

            <div class="row-1">
              <div>
                <label for="tx-descricao">Descrição</label>
                <input id="tx-descricao" type="text" placeholder="Ex.: Salário de Outubro, Mercado, Aluguel, etc." />
              </div>
            </div>

            <div class="actions">
              <button class="btn primary" type="submit">Salvar</button>
              <button class="btn" type="reset">Limpar</button>
            </div>
          </form>
          <p class="note">Use (Conta+Categoria) para receita/despesa OU (De/Para) para transferência.</p>
        </div>
        <div>
          <h2>Transações</h2>
          <table>
            <thead>
              <tr>
                <th>Data</th>
                <th>Tipo</th>
                <th>Conta</th>
                <th style="text-align:right">Valor</th>
                <th>Descrição</th>
                <th>Ações</th>
              </tr>
            </thead>
            <tbody id="tbl-transacoes-body"></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Salários -->
    <section id="tab-salarios" class="panel tab-pane">
      <div class="grid grid-2">
        <div>
          <h2>Novo Salário</h2>
          <form id="form-salario">
            <div class="row">
              <div>
                <label for="sl-nome">Nome (quem recebeu)</label>
                <select id="sl-nome"></select>
              </div>
              <div>
                <label for="sl-valor">Valor do salário</label>
                <input id="sl-valor" type="number" step="0.01" placeholder="0.00" />
              </div>
            </div>
            <div class="row">
              <div>
                <label for="sl-horas">Horas trabalhadas</label>
                <input id="sl-horas" type="number" step="0.01" placeholder="Ex.: 160" />
              </div>
              <div>
                <label for="sl-data">Data</label>
                <input id="sl-data" type="date" />
              </div>
            </div>
            <div class="row-1">
              <div>
                <label for="sl-banco">Banco (onde caiu o salário)</label>
                <select id="sl-banco"></select>
              </div>
            </div>
            <div class="actions">
              <button class="btn primary" type="submit">Salvar Salário</button>
              <button class="btn" type="reset">Limpar</button>
            </div>
          </form>
          <p class="note">Selecione o Titular e o Banco de uma conta cadastrada. O valor será somado ao saldo dessa conta e registrado como receita "Salário".</p>
        </div>
        <div>
          <h2>Salários Lançados</h2>
          <table>
            <thead>
              <tr>
                <th>Data</th>
                <th>Nome</th>
                <th>Banco</th>
                <th>Horas</th>
                <th style="text-align:right">Valor</th>
                <th>Ações</th>
              </tr>
            </thead>
            <tbody id="tbl-salarios-body"></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Categorias -->
    <section id="tab-categorias" class="panel tab-pane">
      <div class="grid grid-2">
        <div>
          <h2>Nova/Editar Categoria</h2>
          <form id="form-categoria">
            <div class="row">
              <div>
                <label for="cat-nome">Nome</label>
                <input id="cat-nome" type="text" placeholder="Ex.: Aluguel, Mercado, Salário" />
              </div>
              <div>
                <label for="cat-tipo">Tipo</label>
                <select id="cat-tipo">
                  <option value="despesa">Despesa</option>
                  <option value="receita">Receita</option>
                </select>
              </div>
            </div>
            <div class="actions">
              <button class="btn primary" type="submit">Salvar Categoria</button>
              <button class="btn" type="reset">Limpar</button>
            </div>
          </form>
        </div>
        <div>
          <h2>Categorias</h2>
          <table>
            <thead>
              <tr>
                <th>Nome</th>
                <th>Tipo</th>
                <th>Ações</th>
              </tr>
            </thead>
            <tbody id="tbl-categorias-body"></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Recorrentes -->
    <section id="tab-recorrentes" class="panel tab-pane">
      <h2>Recorrentes</h2>
      <p class="muted">Em breve. Nesta versão local, foque em Contas, Transações, Salários e Categorias.</p>
    </section>

    <!-- Orçamento -->
    <section id="tab-orcamento" class="panel tab-pane">
      <h2>Orçamento</h2>
      <p class="muted">Em breve.</p>
    </section>

    <!-- Dívidas -->
    <section id="tab-dividas" class="panel tab-pane">
      <h2>Dívidas</h2>
      <p class="muted">Em breve.</p>
    </section>

    <!-- Relatórios -->
    <section id="tab-relatorios" class="panel tab-pane">
      <h2>Relatórios</h2>
      <p class="muted">Em breve.</p>
    </section>

    <!-- Configurações -->
    <section id="tab-config" class="panel tab-pane">
      <h2>Configurações</h2>
      <p class="muted">Sem backend nesta versão. Dados no LocalStorage.</p>
      <div class="actions">
        <button class="btn danger" id="btn-clear">Apagar todos os dados locais</button>
      </div>
    </section>
  </div>

  <script src="finance.js"></script>
  <script>
    (function() {
      function $(sel){ return document.querySelector(sel); }
      const btn = $('#btn-clear');
      if (btn) {
        btn.addEventListener('click', function() {
          if (confirm('Tem certeza que deseja apagar todos os dados locais?')) {
            localStorage.removeItem('finpilot_ie_v1');
            window.location.reload();
          }
        });
      }
    })();
  </script>
</body>
</html>
